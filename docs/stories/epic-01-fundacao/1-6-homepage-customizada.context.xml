<story-context id="bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>6</storyId>
    <title>Criação da Página Inicial Customizada</title>
    <status>drafted</status>
    <generatedAt>2025-11-08</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/epic-01-fundacao/story-1.6-homepage-customizada.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>visitante do site</asA>
    <iWant>uma página inicial acolhedora com busca central e acesso rápido</iWant>
    <soThat>possa começar minha jornada facilmente sem precisar navegar pelo menu</soThat>
    <tasks>
      - 1.6.1: Criar Layout Customizado para a Homepage
      - 1.6.2: Implementar Barra de Busca Central (usando shadcn Input)
      - 1.6.3: Criar Componente de "Cards de Acesso Rápido" (usando shadcn Card)
      - 1.6.4: Popular os Cards
    </tasks>
  </story>

  <acceptanceCriteria>
    - Layout customizado criado sem sidebar Starlight padrão
    - Barra de busca central implementada com shadcn Input
    - Autocomplete/sugestões implementadas (opcional)
    - Cards de acesso rápido criados com shadcn Card
    - 3-4 links para categorias/documentos importantes
    - Design responsivo (3 colunas desktop, 1-2 mobile)
    - Hover effects e transições suaves
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/PR.md</path>
        <title>PRD: Base de Conhecimento da Saúde</title>
        <section>História 1.6 (UX): Criação da Página Inicial Customizada</section>
        <snippet>A homepage deve apresentar busca central facilmente acessível (FR3) e usar componentes shadcn (NFR7). Cards de acesso rápido devem fornecer entrada direta às categorias principais.</snippet>
      </doc>
      <doc>
        <path>docs/Arquitetura.md</path>
        <title>Documento de Arquitetura Fullstack</title>
        <section>3.5. Estratégia de Componentização com shadcn studio pro</section>
        <snippet>Card e Input são componentes shadcn base. Card usado para acesso rápido e wrappers de conteúdo na Homepage. Input usado para barra de busca na Homepage. Todos os componentes devem seguir WCAG 2.1 AA e usar variáveis CSS do design system.</snippet>
      </doc>
      <doc>
        <path>docs/PR.md</path>
        <title>PRD: Base de Conhecimento da Saúde</title>
        <section>2.2. Requisitos Não Funcionais - NFR7 (Componentização)</section>
        <snippet>Todos os componentes UI personalizados devem ser construídos usando shadcn studio pro como biblioteca base. Componentes devem ser reutilizáveis, acessíveis (WCAG 2.1 AA) e seguir convenções do shadcn. Evitar estilos inline; usar classes Tailwind e variáveis CSS do design system.</snippet>
      </doc>
    </docs>
    <code>
      <artifact>
        <path>src/content/docs/index.mdx</path>
        <kind>page</kind>
        <symbol>index.mdx</symbol>
        <lines>1-30</lines>
        <reason>Current homepage using Starlight "splash" template. Will be replaced with custom layout without sidebar, implementing search bar and quick access cards.</reason>
      </artifact>
      <artifact>
        <path>src/components/ui/card.tsx</path>
        <kind>component</kind>
        <symbol>Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter</symbol>
        <lines>1-76</lines>
        <reason>Existing shadcn Card components to be used for QuickAccessCard. Already integrated with Starlight CSS variables.</reason>
      </artifact>
      <artifact>
        <path>src/components/ui/input.tsx</path>
        <kind>component</kind>
        <symbol>Input</symbol>
        <lines>1-25</lines>
        <reason>Existing shadcn Input component to be used for central search bar. Supports Starlight CSS variables and accessibility.</reason>
      </artifact>
      <artifact>
        <path>src/lib/utils.ts</path>
        <kind>utility</kind>
        <symbol>cn</symbol>
        <lines>1-11</lines>
        <reason>Utility function for merging Tailwind classes. Required by shadcn components for conditional styling.</reason>
      </artifact>
      <artifact>
        <path>src/assets/custom.css</path>
        <kind>stylesheet</kind>
        <symbol>N/A</symbol>
        <lines>1-71</lines>
        <reason>Custom CSS with Starlight theme overrides. Contains CSS variable definitions and theme-specific styles for light/dark modes.</reason>
      </artifact>
      <artifact>
        <path>astro.config.mjs</path>
        <kind>config</kind>
        <symbol>defineConfig</symbol>
        <lines>1-62</lines>
        <reason>Astro configuration with Starlight setup, custom CSS imports, and sidebar structure. Shows existing customCss array and component overrides pattern.</reason>
      </artifact>
    </code>
    <dependencies>
      <node>
        <package>astro</package>
        <version>^5.6.1</version>
        <purpose>Core framework for building the static site</purpose>
      </node>
      <node>
        <package>@astrojs/starlight</package>
        <version>^0.36.2</version>
        <purpose>Documentation theme providing base layout and styling</purpose>
      </node>
      <node>
        <package>@astrojs/react</package>
        <version>^4.4.2</version>
        <purpose>React integration for Astro, required for shadcn components</purpose>
      </node>
      <node>
        <package>react</package>
        <version>^19.2.0</version>
        <purpose>React library for UI components</purpose>
      </node>
      <node>
        <package>react-dom</package>
        <version>^19.2.0</version>
        <purpose>React DOM rendering</purpose>
      </node>
      <node>
        <package>lucide-react</package>
        <version>^0.553.0</version>
        <purpose>Icon library for search icons and card decorations</purpose>
      </node>
      <node>
        <package>tailwindcss</package>
        <version>^4.1.17</version>
        <purpose>Utility-first CSS framework for styling</purpose>
      </node>
      <node>
        <package>@tailwindcss/vite</package>
        <version>^4.1.17</version>
        <purpose>Tailwind Vite plugin</purpose>
      </node>
      <node>
        <package>class-variance-authority</package>
        <version>^0.7.1</version>
        <purpose>Used by shadcn for component variant management</purpose>
      </node>
      <node>
        <package>clsx</package>
        <version>^2.1.1</version>
        <purpose>Utility for constructing className strings conditionally</purpose>
      </node>
      <node>
        <package>tailwind-merge</package>
        <version>^3.3.1</version>
        <purpose>Merge Tailwind classes without conflicts (used in cn utility)</purpose>
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    - Custom homepage layout must NOT use Starlight's default sidebar
    - All components must use shadcn components as base (Card, Input)
    - Must use existing CSS variables from Starlight theme (--sl-color-*)
    - Must support both light and dark themes
    - Must be fully responsive (3 columns desktop, 1-2 mobile)
    - Must maintain WCAG 2.1 AA accessibility standards
    - Avoid inline styles - use Tailwind classes and CSS variables
    - Use lucide-react icons for visual elements
    - Search bar must redirect to custom search results page
    - Homepage is first contact point - must load quickly (performance critical)
    - Must maintain design consistency with existing theme customizations (Story 1.2)
  </constraints>
  <interfaces>
    <interface>
      <name>Card Component API</name>
      <kind>React Component</kind>
      <signature>Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter - all accept className and standard HTMLDivElement props</signature>
      <path>src/components/ui/card.tsx</path>
    </interface>
    <interface>
      <name>Input Component API</name>
      <kind>React Component</kind>
      <signature>Input - extends React.InputHTMLAttributes&lt;HTMLInputElement&gt;, supports type and className props</signature>
      <path>src/components/ui/input.tsx</path>
    </interface>
    <interface>
      <name>Starlight CSS Variables</name>
      <kind>CSS Variables</kind>
      <signature>--sl-color-bg, --sl-color-text, --sl-color-hairline, --sl-color-gray-*, --sl-color-accent, --sl-color-text-accent</signature>
      <path>Built-in Starlight theme</path>
    </interface>
    <interface>
      <name>Astro Page Frontmatter</name>
      <kind>MDX/Astro Configuration</kind>
      <signature>title, description, template (e.g., "splash" for no-sidebar layouts)</signature>
      <path>src/content/docs/index.mdx</path>
    </interface>
  </interfaces>
  <tests>
    <standards>
      This is a UX-focused story implementing visual components and layout. Testing approach should focus on:
      - Manual visual testing in browser (light/dark themes, responsive breakpoints)
      - Accessibility validation (WCAG 2.1 AA compliance)
      - Component integration testing (React components render correctly in Astro)
      - Performance testing (page load times, Lighthouse scores)

      The project uses Astro framework which doesn't have a standard testing setup yet. Focus on build-time validation and manual browser testing.
    </standards>
    <locations>
      - Manual browser testing at http://localhost:4321/ during development
      - Visual inspection of responsive breakpoints (mobile, tablet, desktop)
      - Browser DevTools for accessibility audit (Lighthouse, axe DevTools)
    </locations>
    <ideas>
      <test ac="Layout customizado criado sem sidebar Starlight padrão">
        - Verify homepage loads without left sidebar visible
        - Confirm splash template is applied correctly
        - Check that layout differs from standard Starlight documentation pages
      </test>
      <test ac="Barra de busca central implementada com shadcn Input">
        - Verify search input renders centrally on page
        - Test search icon appears on left side of input
        - Confirm input has proper focus states and animations
        - Test keyboard accessibility (tab navigation, enter to submit)
        - Verify placeholder text is visible and appropriate
      </test>
      <test ac="Cards de acesso rápido criados com shadcn Card">
        - Verify 3-4 quick access cards render correctly
        - Test card hover effects (elevation, smooth transitions)
        - Confirm each card has title, description, icon, and link
        - Verify cursor changes to pointer on hover
      </test>
      <test ac="Design responsivo (3 colunas desktop, 1-2 mobile)">
        - Desktop (≥1024px): Verify 3-column grid layout
        - Tablet (768px-1023px): Verify 2-column grid layout
        - Mobile (&lt;768px): Verify 1-column stacked layout
        - Test transitions between breakpoints are smooth
      </test>
      <test ac="Hover effects e transições suaves">
        - Verify card elevation increases on hover
        - Confirm transitions are smooth (no jank)
        - Test hover effects work in both light and dark themes
      </test>
      <test general="Accessibility">
        - Run Lighthouse accessibility audit (target score: 100)
        - Verify proper heading hierarchy (h1, h2, etc.)
        - Test keyboard navigation through all interactive elements
        - Confirm sufficient color contrast ratios in both themes
        - Verify screen reader compatibility (alt text, ARIA labels)
      </test>
      <test general="Performance">
        - Run Lighthouse performance audit (target score: ≥90)
        - Verify homepage loads quickly (target: &lt;2s)
        - Confirm no layout shift (CLS) during load
        - Test with throttled network (3G simulation)
      </test>
      <test general="Theme Support">
        - Verify all components render correctly in light theme
        - Verify all components render correctly in dark theme
        - Test theme toggle switches seamlessly without layout issues
        - Confirm CSS variables are properly applied
      </test>
    </ideas>
  </tests>
</story-context>
